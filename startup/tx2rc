# This file is the environment entry point. It can be sourced from an
# interactive session or otherwise. To properly setup a TX2 for Safe2Ditch,
# source this script from the `~/.bashrc` file.

# Get path to the directory of this file, no matter where it is sourced from
MYPATH=$(dirname ${BASH_SOURCE[0]})

# Tell the environment where the root of the Safe2Ditch code lives
export S2DROOT=$(realpath $MYPATH/..)
export S2DAIRCRAFT="sully"

alias ll='ls -lh --color=auto'
alias l='ls -alh --color=auto'
alias ..='cd ..'
alias ...='cd ../..'

# Parallel Make
export MAKEFLAGS="-j $(grep -c ^processor /proc/cpuinfo)"

# ROS Kinetic
export ROS_MASTER_URI=http://localhost:11311
export ROS_IP=192.168.0.138
source /opt/ros/kinetic/setup.bash
source $MYPATH/../catkin_ws/devel/setup.bash

# Python Path
export PYTHONPATH="$PYTHONPATH:$S2DROOT/dss/mavproxy/modules"

# ROS Tools
alias catkin_make_tx2='catkin_make -DVISUAL_MTT_CUDA=ON -DOpenCV_DIR=/usr/local/share/OpenCV -DCATKIN_BLACKLIST_PACKAGES="nasa_s2d_sim;ardupilot_sim;gzsatellite;moving_targets"'
alias bagrecord='rosbag record -a -x "/camera/(.*)|/tracks_video(.*)" /camera/image_raw/compressed /camera/camera_info /tracks_video/compressed'
alias rosgo='roslaunch nasa_s2d hardware.launch'

# Setup a test environment
function testname {
	NAME=$1
	echo $NAME > $S2DROOT/startup/.testname
}
